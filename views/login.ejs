<!DOCTYPE html>
<html lang="ja">
  
  <head>
<!--     <title><%= process.env.APPTITLE %></title> -->
    <title><%= process.env.APPTITLE %></title>
    <meta name="description" content="A cool thing made with Glitch" />
    <!--<link id="favicon" rel="icon" href="https://glitch.com/edit/favicon-app.ico" type="image/x-icon"> -->
    <link
      id="favicon"
      rel="icon"
      href="https://img.icons8.com/external-vitaliy-gorbachev-fill-vitaly-gorbachev/60/000000/external-cherry-blossom-flowers-vitaliy-gorbachev-fill-vitaly-gorbachev.png"
      type="image/x-icon"
    />
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!--bootstrap -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1"
      crossorigin="anonymous"
    />
    <!-- import the webpage's stylesheet -->
    <link rel="stylesheet" href="/style.css" />
  </head>
  
  
  <body>
    
    <!-- ヘッダー -->
    <header>
      <nav class="navbar navbar-light bg-dark">
        <div class="container-fluid d-flex align-items-center justify-content-center py-2">
          <a class="navbar-brand text-white" href=""><%= process.env.APPTITLE %></a>
        </div>
      </nav>
    </header> 
    
    
    <!-- ログインフォーム -->
    <div class="container py-5">
      <form action="/users/authentication" method="post">
        <div class="mb-3 d-flex align-items-center justify-content-center">
          <table>
            <thead>
              <th></th>
              <th></th>
            </thead>
            <tbody>
              <tr>
                <td hidden height="100px">
                  <label>アカウント：</label>
                </td>
                <td hidden>
                  <input type="text" name="username" style="width:100%;" value=<%= process.env.KEY1 %> />
                </td>
              </tr>
              <tr>
                <td>
                  <label>パスワード：</label>
                </td>
                <td>
                  <input type="password" name="password" style="width:100%;"/>
                </td>
              </tr> 
            </tbody>     
          </table>       
        </div>
        <br>
        <br>
        <div class="text-center">
          <input class="btn btn-dark" type="submit" value="ログイン"/>
        </div>
      </form>
      <br>
      <br>
      <div class="text-secondary">
        本アプリのサーバーは「５分間」の「不使用」で「スリープ」する仕様になっています。その日一番にアクセスした人は少しだけサーバー起動に時間がかかります。
      </div>
    </div>
  
    <br>
 
      
    <!-- フッター -->
    <footer class="footer mt-auto py-3 bg-light">
      <div
        class="container d-flex align-items-center justify-content-center text-muted"
      >
        Copyright ©<%= process.env.APPTITLE %>
      </div>
    </footer>

    
    <!-- bootstrap -->
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW"
      crossorigin="anonymous">
    </script>
    
    
    <script>
      //enter押しでsubmitしないようにする。
      document.onkeypress = submit_cancel;
      function submit_cancel(){
          if( window.event.keyCode == 13 ){
              return false;
          }
      };
    </script>
    
    
    <script>
      // アカウント又はパスワードに誤りがある場合      
      const url = location.href;
      const result = url.indexOf("failure"); //indexOf 値が見つからない場合は-1を返す
      if (result != -1) {
        console.log("failure");
        const result = window.confirm("「アカウント」又は「パスワード」に誤りがあります。");
        if (result) {
          window.location.href = "/";
        }
      };
    </script>
    
    
  </body>
</html>